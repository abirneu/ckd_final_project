{% load static %}
{% include 'base.html' %}
{% include 'navbar.html' %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <!-- Patient Header -->
        <div class="bg-teal-600 px-6 py-4">
            <h2 class="text-xl font-semibold text-white">Patient Profile: {{ patient.name }}</h2>
        </div>
        
        <!-- Patient Details -->
        <div class="p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <h3 class="text-lg font-medium text-gray-900 mb-2">Basic Information</h3>
                    <div class="space-y-2">
                        <p><span class="font-medium">Phone:</span> {{ patient.phone }}</p>
                        <p><span class="font-medium">Age:</span> {{ patient.age }} years</p>
                        <p><span class="font-medium">Status:</span> 
                            <span class="px-2 py-1 text-xs font-semibold rounded-full 
                                      {% if patient.status == 'pending' %}bg-yellow-100 text-yellow-800
                                      {% else %}bg-green-100 text-green-800{% endif %}">
                                {{ patient.get_status_display }}
                            </span>
                        </p>
                        <p><span class="font-medium">Prediction Result: {{result2}}</span></p>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-medium text-gray-900 mb-2">Medical Information</h3>
                    <div class="space-y-2">
                        <p><span class="font-medium">Blood Pressure:</span> {{ patient.upper_bp }}/{{ patient.lower_bp }} mmHg</p>
                        <p><span class="font-medium">Hypertension:</span> {{ patient.get_hypertension_display }}</p>
                        <p><span class="font-medium">Diabetes:</span> {{ patient.get_diabetes_display }}</p>
                        <p><span class="font-medium">Pedal Edema:</span> {{ patient.get_pedal_edema_display }}</p>
                        <p><span class="font-medium">Anemia:</span> {{ patient.get_anemia_display }}</p>
                        <p><span class="font-medium">Appetite:</span> {{ patient.get_appetite_display }}</p>

                        
                    </div>
                </div>
            </div>
            
            <!-- Prediction Section -->
            {% comment %} <div class="mt-8 space-y-4">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="text-lg font-medium text-gray-900 mb-2">Suggested Group/Panel</h3>
                    <div class="flex items-center">
                        <span class="font-medium mr-2">Result:</span>
                        <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold">
                            {{ predicted_group }}
                        </span>
                    </div>
                </div>
            </div> {% endcomment %}
         <div class="ml-3 md:ml-4">
                        <h3 class="text-base md:text-lg font-medium text-gray-800 mb-2 md:mb-3">   <span class="font-bold text-teal-600">{{ predicted_group }}</span> , we recommend:</h3>
                        
                        <div class="space-y-1 md:space-y-2 pl-3 md:pl-4 border-l-2 border-teal-200">
                            {% if 'Group 1' in predicted_group %}
                                <p class="test-item text-sm md:text-base"><strong>1. Complete Blood Count (CBC)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>2. Urine Albumin-to-Creatinine Ratio (uACR)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>3. Serum Creatinine</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>4. Estimated GFR (eGFR)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>5. Urine Routine Examination</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>6. Hemoglobin A1c (HbA1c)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>7. Lipid Profile (for HTN/DM patients)</strong></p>
                               
                            {% elif 'Group 2' in predicted_group %}
                                <p class="test-item text-sm md:text-base"><strong>1. Complete Blood Count (CBC)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>2. Urine Albumin-to-Creatinine Ratio (uACR)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>3. Serum Creatinine</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>4. Estimated GFR (eGFR)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>5. Urine Routine Examination</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>6. Hemoglobin A1c (HbA1c)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>7. Lipid Profile</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>8. Serum Electrolytes (for HTN/DM/PE patients)</strong></p>
                               
                                        
                            {% elif 'Group 3' in predicted_group %}
                                <p class="test-item text-sm md:text-base"><strong>1. Complete Blood Count (CBC)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>2. Urine Albumin-to-Creatinine Ratio (uACR)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>3. Serum Creatinine</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>4. Estimated GFR (eGFR)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>5. Urine Routine Examination</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>6. Hemoglobin A1c (HbA1c)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>7. Lipid Profile</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>8. Serum Electrolytes (for HTN/DM/PE patients)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>9. Iron Profile</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>10. Comprehensive Metabolic Panel</strong></p>
                              
                            {% elif 'Group 4' in predicted_group %}
                                <p class="test-item text-sm md:text-base"><strong>1. Complete Blood Count (CBC)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>2. Urine Albumin-to-Creatinine Ratio (uACR)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>3. Serum Creatinine</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>4. Estimated GFR (eGFR)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>5. Blood Urea Nitrogen (BUN)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>6. Serum Electrolytes</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>7. Urine Routine Examination</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>8. Hemoglobin A1c (HbA1c)</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>9. Lipid Profile</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>10. Iron Profile</strong></p>
                                <p class="test-item text-sm md:text-base"><strong>11. Ultrasound (Whole Abdomen/KUB Focus)</strong></p>
                                <div class="mt-3 md:mt-4 p-2 md:p-3 bg-red-50 border-l-4 border-red-500">
                                    <p class="text-xs md:text-sm text-red-700"><strong>Note:</strong> This is a critical condition requiring urgent nephrology consultation.</p>
                                </div>
                               
                            {% elif 'Panel A' in predicted_group %}
                                <p class="test-item text-sm md:text-base">Hypertension monitoring recommended</p>

                            {% elif 'Panel B' in predicted_group %}
                                <p class="test-item text-sm md:text-base">Diabetes mellitus monitoring  recommended</p>
                            {% elif 'Panel C' in predicted_group %}
                                <p class="test-item text-sm md:text-base">Anemia/proteinuria evaluation  recommended</p>
                            {% elif 'Panel D' in predicted_group %}
                                <p class="test-item text-sm md:text-base">General renal health monitoring recommended</p>
                            {% endif %}
                            
                        </div>
                        
                        
                    </div>    
        </div>
    </div>
</div>
{% endblock %}
{% include 'footer.html' %}